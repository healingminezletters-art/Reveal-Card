<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Magical Shuffle Deck</title>
<style>
  body {
    background-color: #40E0D0; /* turquoise page background */
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    font-family: sans-serif;
    overflow: hidden;
  }

  #card-container {
    position: relative;
    width: 300px;
    height: 450px;
    perspective: 1200px;
    cursor: pointer;
  }

  .card {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0,0,0,0.3);
    backface-visibility: hidden;
    transform-style: preserve-3d;
    transition: transform 0.5s ease, opacity 0.5s ease, filter 0.5s ease;
  }

  /* Shimmer glow effect */
  .shimmer {
    filter: drop-shadow(0 0 20px #E6E6FA) drop-shadow(0 0 10px #FFD700);
  }
</style>
</head>
<body>

<div id="card-container">
  <!-- Multiple cards for shuffle effect -->
  <img class="card shimmer" src="https://i.imgur.com/3xOO16W.png" alt="Card 1">
  <img class="card shimmer" src="https://i.imgur.com/3xOO16W.png" alt="Card 2">
  <img class="card shimmer" src="https://i.imgur.com/3xOO16W.png" alt="Card 3">
  <img class="card shimmer" src="https://i.imgur.com/3xOO16W.png" alt="Main Card" id="main-card">
</div>

<!-- Soft chime sound -->
<audio id="chime-sound" src="https://freesound.org/data/previews/341/341695_6245390-lq.mp3" preload="auto"></audio>

<script>
const cards = document.querySelectorAll('#card-container .card');
const chime = document.getElementById('chime-sound');

// Helper: generate random number in range
function random(min, max) {
  return Math.random() * (max - min) + min;
}

// Trigger dynamic shuffle
function shuffleDeck() {
  chime.currentTime = 0;
  chime.play();

  cards.forEach(card => {
    if(card.id !== 'main-card') {
      // Reset
      card.style.display = 'block';

      // Randomize positions, rotation, and opacity
      const translateX = random(-80, 80);
      const translateY = random(-50, 50);
      const rotateY = random(180, 720);
      const rotateX = random(-30, 30);
      const opacity = random(0.5, 1);

      card.style.transform = `translate(${translateX}px, ${translateY}px) rotateY(${rotateY}deg) rotateX(${rotateX}deg)`;
      card.style.opacity = opacity;
    }
  });

  // After 3.5 sec, hide all but main card
  setTimeout(() => {
    cards.forEach(card => {
      if(card.id !== 'main-card') card.style.display = 'none';
    });
    document.getElementById('main-card').classList.add('shimmer');
    // Reset main card transform
    document.getElementById('main-card').style.transform = 'translate(0px,0px) rotateY(0deg) rotateX(0deg)';
  }, 3500);
}

// Reset all cards for next click
function resetDeck() {
  cards.forEach(card => {
    card.style.transition = 'none';
    card.style.transform = 'translate(0px,0px) rotateY(0deg) rotateX(0deg)';
    card.style.opacity = 1;
    card.style.display = 'block';
    // Force reflow to allow transition again
    void card.offsetWidth;
    card.style.transition = 'transform 0.5s ease, opacity 0.5s ease';
  });
}

// Click to shuffle
document.getElementById('card-container').addEventListener('click', () => {
  resetDeck();
  shuffleDeck();
});
</script>

</body>
</html>
