<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Healing Minez: Magical Card Pull</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display&display=swap" rel="stylesheet">
<style>
body { margin:0; padding:0; background:#40E0D0; font-family:'Playfair Display', serif; color:black; text-align:center; overflow-x:hidden; }
h1 { font-size:2em; margin-top:20px; }
h1 span { display:block; font-size:1em; margin-top:10px; }
.signature { font-family:'Great Vibes', cursive; font-size:1.5em; color:#000; margin-top:10px; animation: pulse 2s infinite; }
@keyframes pulse {0%,100%{ transform:scale(1); }50%{ transform:scale(1.1); }}
#spreadButtons button, #revealBtn { background:#FF69B4; color:white; border:none; padding:15px 30px; margin:5px; border-radius:15px; cursor:pointer; font-size:1.2em; transition: transform 0.2s; }
#spreadButtons button:hover, #revealBtn:hover { transform: scale(1.05); }
#spreadDesc { font-size:1.1em; margin:10px 0; min-height:24px; }
#cardContainer { margin:30px auto; position:relative; width:90%; max-width:1200px; min-height:450px; display:flex; justify-content:center; align-items:center; perspective:2000px; }
.card { width:280px; height:380px; border-radius:10px; position:absolute; cursor:pointer; transition: transform 0.6s ease, left 0.6s ease, top 0.6s ease; box-shadow:0 0 5px rgba(0,0,0,0.2); background-size: cover; background-position: center; }
.cardMessage { position:absolute; width:280px; color:#000; font-size:1em; text-align:center; top:400px; left:0; opacity:0; transition: opacity 1s ease; }
.star { position:absolute; width:2px; height:2px; background:white; border-radius:50%; box-shadow:0 0 4px 1px gold; animation: twinkle 2s infinite; }
@keyframes twinkle {0%,100% {opacity:0.3;} 50% {opacity:1;}}
.sparkle, .dust { position:absolute; border-radius:50%; opacity:0; pointer-events:none; animation:particleAnim 0.9s ease-out forwards; }
@keyframes particleAnim {0% {transform:scale(0); opacity:1;} 50% {transform:scale(2); opacity:1;} 100% {transform:scale(0); opacity:0;}}
</style>
</head>
<body>

<h1>
ðŸ¦‹ Pull your card(s), Beautiful Soul ðŸ’–
<span>Each affirmation in this deck is a whisper from your healed self. This is a safe space.</span>
<span class="signature">With unconditional love, Healing Minez ðŸ’–</span>
</h1>

<div id="spreadButtons">
  <button data-spread="1">1 Card</button>
  <button data-spread="3">3 Cards</button>
  <button data-spread="5">5 Cards</button>
</div>

<div id="spreadDesc">Daily inspiration / journal prompt.</div>

<div id="cardContainer"></div>

<br>
<button id="revealBtn">âœ¨ Reveal Card(s) âœ¨</button>

<audio id="chime" src="https://www.soundjay.com/misc/sounds/magic-chime-01.mp3?v=2"></audio>

<script>
const version = 2; 
const deck = [
  {front:`https://i.imgur.com/MB5MTZ4.png?v=${version}`, message:"Affirmation 1"},
  {front:`https://i.imgur.com/HsSFp1G.png?v=${version}`, message:"Affirmation 2"},
  {front:`https://i.imgur.com/HMDsIdj.png?v=${version}`, message:"Affirmation 3"},
  {front:`https://i.imgur.com/pu3CPVv.png?v=${version}`, message:"Affirmation 4"},
  {front:`https://i.imgur.com/pDONoKd.png?v=${version}`, message:"Affirmation 5"},
  {front:`https://i.imgur.com/zgWvZtT.png?v=${version}`, message:"Affirmation 6"}
];
const goldBack = `https://i.imgur.com/3xOO16W.png?v=${version}`;
const cardContainer = document.getElementById('cardContainer');
const revealBtn = document.getElementById('revealBtn');
const chime = document.getElementById('chime');
const spreadDesc = document.getElementById('spreadDesc');
let selectedSpread = 1;
let pulledCards = [];

// Floating stars
for(let i=0;i<50;i++){
  const star=document.createElement('div');
  star.className='star';
  star.style.top=Math.random()*100+'%';
  star.style.left=Math.random()*100+'%';
  star.style.width=Math.random()*3+1+'px';
  star.style.height=star.style.width;
  document.body.appendChild(star);
}

// Show gold cards fanned
function showGoldCards(num){
  cardContainer.innerHTML=''; 
  const fanAngle = num>1 ? 30/(num-1) : 0;
  const centerX = cardContainer.offsetWidth/2;
  const centerY = 50;
  for(let i=0;i<num;i++){
    const card=document.createElement('div');
    card.className='card';
    card.style.backgroundImage=`url(${goldBack})`;
    const angle = (i-(num-1)/2)*fanAngle;
    const offsetX = Math.sin(angle*Math.PI/180)*80;
    const offsetY = Math.abs(Math.cos(angle*Math.PI/180)*20);
    card.style.left = centerX - 140 + offsetX + 'px';
    card.style.top = centerY + offsetY + 'px';
    card.style.transform = `rotate(${angle}deg)`;
    card.style.zIndex = i+10;
    // Add message container
    const msg = document.createElement('div');
    msg.className='cardMessage';
    card.appendChild(msg);
    cardContainer.appendChild(card);
  }
}

window.addEventListener('load', ()=>{ showGoldCards(selectedSpread); });

document.querySelectorAll('#spreadButtons button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    selectedSpread=parseInt(btn.dataset.spread);
    spreadDesc.innerText = selectedSpread===1?"Daily inspiration / journal prompt.":
                           selectedSpread===3?"Message from Divine: Past â€“ Present â€“ Future.":
                           "Deep insight: 5-card guidance spread.";
    showGoldCards(selectedSpread);
    pulledCards=[];
  });
});

function shuffleDeck(cardsElems, duration=2200){
  return new Promise(resolve=>{
    let start = Date.now();
    const interval = setInterval(()=>{
      const t = Date.now() - start;
      cardsElems.forEach((c,i)=>{
        const x = Math.sin((t/180+i)*Math.PI*2)*120 + Math.random()*20;
        const y = Math.cos((t/140+i)*Math.PI*3)*40 + Math.random()*15;
        const rot = Math.sin((t/120+i))*25;
        c.style.transform=`translate(${x}px,${y}px) rotate(${rot}deg)`;
      });
      if(t>=duration){
        clearInterval(interval);
        resolve();
      }
    },30);
  });
}

function createSparkles(cardElem, count=80){
  for(let j=0;j<count;j++){
    const sparkle=document.createElement('div');
    sparkle.classList.add('sparkle');
    const angle=Math.random()*2*Math.PI;
    const radius=Math.random()*120+80;
    const size=Math.random()*4+4;
    sparkle.style.width = size+'px';
    sparkle.style.height = size+'px';
    sparkle.style.left=cardElem.offsetWidth/2 + Math.cos(angle)*radius + 'px';
    sparkle.style.top=cardElem.offsetHeight/2 + Math.sin(angle)*radius + 'px';
    const colors=['#FFD700','#FF69B4','#D8B0FF','#FFFFFF'];
    const color=colors[Math.floor(Math.random()*colors.length)];
    sparkle.style.background=color;
    sparkle.style.boxShadow=`0 0 ${size*2}px ${size}px ${color}`;
    cardContainer.appendChild(sparkle);
    setTimeout(()=>sparkle.remove(),2000);
  }
}

function createDustTrail(cardElem){
  const trail = setInterval(()=>{
    const dust=document.createElement('div');
    dust.classList.add('dust');
    const size=Math.random()*3+2;
    dust.style.width = size+'px';
    dust.style.height = size+'px';
    const rect=cardElem.getBoundingClientRect();
    dust.style.left = (rect.left + Math.random()*cardElem.offsetWidth) + 'px';
    dust.style.top = (rect.top + Math.random()*cardElem.offsetHeight) + 'px';
    const colors=['#FFD700','#FF69B4','#D8B0FF','#FFFFFF'];
    dust.style.background=colors[Math.floor(Math.random()*colors.length)];
    document.body.appendChild(dust);
    setTimeout(()=>dust.remove(),1200);
  },50);
  setTimeout(()=>clearInterval(trail),1500);
}

revealBtn.addEventListener('click', async ()=>{
  const cardsElems=Array.from(cardContainer.children);
  if(cardsElems.length!==selectedSpread) return;
  createDustTrail(cardsElems[0]);
  await shuffleDeck(cardsElems);

  pulledCards=[];
  const indices=[];
  while(pulledCards.length<selectedSpread){
    const rand=Math.floor(Math.random()*deck.length);
    if(!indices.includes(rand)){
      indices.push(rand);
      pulledCards.push(deck[rand]);
    }
  }

  const fanAngle = selectedSpread>1 ? 30/(selectedSpread-1) : 0;
  const centerX = cardContainer.offsetWidth/2;
  const centerY = 50;

  cardsElems.forEach((c,i)=>{
    const cardData = pulledCards[i];
    c.style.backgroundImage=`url(${cardData.front})`;
    const angle = (i-(selectedSpread-1)/2)*fanAngle;
    const offsetX = Math.sin(angle*Math.PI/180)*80;
    const offsetY = Math.abs(Math.cos(angle*Math.PI/180)*20);
    c.style.left = centerX - 140 + offsetX + 'px';
    c.style.top = centerY + offsetY + 'px';
    c.style.transform = `rotate(${angle}deg)`;
    c.style.zIndex = i+20;
    createSparkles(c,50);
    // Show message
    const msg = c.querySelector('.cardMessage');
    msg.innerText = cardData.message;
    msg.style.opacity = 1;
  });
  chime.currentTime=0;
  chime.play();
});
</script>

</body>
</html>
