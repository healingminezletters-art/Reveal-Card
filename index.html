<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Healing Minez: Pull Your Daily Card</title>
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display&display=swap" rel="stylesheet">
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
<style>
  body {
    margin:0;
    padding:0;
    background: #40E0D0; /* soft turquoise */
    overflow-x:hidden;
    font-family: 'Playfair Display', serif;
    color: black;
    text-align:center;
  }

  header h1 {
    font-size: 2rem;
    line-height: 1.2;
    margin-top:20px;
  }
  header h1 span {
    display:block;
    font-size:1.1rem;
    margin-top:10px;
  }
  .signature {
    font-family:'Great Vibes', cursive;
    font-size:2rem;
    display:block;
    margin-top:14px;
    color:#000;
    animation: pulse 2s infinite;
  }
  @keyframes pulse {
    0%,100% { transform: scale(1); }
    50% { transform: scale(1.1); }
  }

  #cardContainer {
    margin:30px auto;
    position:relative;
    width:90%;
    max-width:600px;
    min-width:150px;
    height:auto;
  }

  .card {
    position:absolute;
    top:0;
    left:50%;
    transform: translateX(-50%);
    transition: transform 0.5s, box-shadow 0.5s;
    border-radius:10px;
  }

  button {
    background-color:#FF69B4;
    color:white;
    border:none;
    padding:15px 30px;
    font-size:1.2em;
    border-radius:15px;
    cursor:pointer;
    transition: transform 0.2s;
    margin-top:20px;
  }
  button:hover {transform: scale(1.05);}

  .star {
    position:absolute;
    width:2px;
    height:2px;
    background:white;
    border-radius:50%;
    box-shadow:0 0 4px 1px gold;
    animation: twinkle 2s infinite;
  }
  @keyframes twinkle {
    0%,100% {opacity:0.3;}
    50% {opacity:1;}
  }

  .sparkle {
    position:absolute;
    width:4px;
    height:4px;
    border-radius:50%;
    background: #FFD700;
    box-shadow: 0 0 8px 3px #FFD700;
    opacity:0;
    pointer-events:none;
    animation: sparkleAnim 0.8s ease-out forwards;
  }
  @keyframes sparkleAnim {
    0% {transform:scale(0); opacity:1;}
    50% {transform:scale(1.5); opacity:1;}
    100% {transform:scale(0); opacity:0;}
  }

  #spreadButtons {
    margin-top:20px;
  }

  #spreadButtons button {
    margin:0 5px;
  }

  #spreadDesc {
    margin-top:6px;
    font-size: 1rem;
    text-align: center;
    width: 100%;
  }

</style>
</head>
<body>

<header>
<h1>
ðŸ¦‹ Pull your card(s), Beautiful Soul ðŸ’–<br>
Each affirmation in this deck is a whisper from your healed self. This is a safe space.<br>
<span class="signature">With unconditional love, Healing Minez ðŸ’–</span>
</h1>
</header>

<div id="spreadButtons">
  <button data-cards="1">1 Card Pull</button>
  <button data-cards="3">3 Card Pull</button>
  <button data-cards="5">5 Card Pull</button>
</div>
<div id="spreadDesc">1 card pull for daily inspiration or journal prompt</div>

<div id="cardContainer">
  <img id="coverCard" class="card" src="https://i.imgur.com/3xOO16W.png" alt="Cover Card">
</div>

<br>
<button id="revealBtn">âœ¨ Reveal Card(s) âœ¨</button>

<audio id="chime" src="https://www.soundjay.com/misc/sounds/magic-chime-01.mp3"></audio>

<script>
const version = Date.now();
const goldCards = [
  'https://i.imgur.com/MB5MTZ4.png',
  'https://i.imgur.com/HsSFp1G.png',
  'https://i.imgur.com/HMDsIdj.png',
  'https://i.imgur.com/pu3CPVv.png',
  'https://i.imgur.com/pDONoKd.png'
];
const messageCards = [
  'https://i.imgur.com/zgWvZtT.png',
  'https://i.imgur.com/Ybi9YzL.png',
  'https://i.imgur.com/SjaDX9E.png',
  'https://i.imgur.com/oNN1KR0.png',
  'https://i.imgur.com/hFDmOf8.png',
  'https://i.imgur.com/stl9kfH.png',
  'https://i.imgur.com/IFpGZnY.png',
  'https://i.imgur.com/83CEyAl.png',
  'https://i.imgur.com/oCfk4b9.png',
  'https://i.imgur.com/ZCB64Hj.png'
]; // add all 50 if needed

const cardContainer = document.getElementById('cardContainer');
const revealBtn = document.getElementById('revealBtn');
const chime = document.getElementById('chime');
const spreadButtons = document.querySelectorAll('#spreadButtons button');
const spreadDesc = document.getElementById('spreadDesc');

let currentSpread = 1;
spreadButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    currentSpread = parseInt(btn.dataset.cards);
    const desc = currentSpread===1 ? "1 card pull for daily inspiration or journal prompt" :
                currentSpread===3 ? "3 card spread: a message from the Divine" :
                "5 card spread: deep insight & guidance";
    spreadDesc.textContent = desc;
  });
});

// stars
for(let i=0;i<50;i++){
  const star = document.createElement('div');
  star.className = 'star';
  star.style.top = Math.random()*100 + '%';
  star.style.left = Math.random()*100 + '%';
  star.style.width = Math.random()*3+1 + 'px';
  star.style.height = star.style.width;
  cardContainer.appendChild(star);
}

function computeCardWidth(n){
  const containerWidth = Math.max(cardContainer.clientWidth, 320);
  const gapTotal = (n-1) * 20;
  const available = containerWidth - gapTotal - 40; 
  const maxW = n===5 ? 220 : 320;
  const w = Math.floor(Math.max(140, Math.min(maxW, available / n)));
  return w;
}

revealBtn.addEventListener('click', () => {
  cardContainer.innerHTML = ''; // clear previous
  const width = computeCardWidth(currentSpread);
  const cardsInPlay = [];

  // gold cards
  for(let i=0;i<currentSpread;i++){
    const gold = document.createElement('img');
    gold.className='card';
    gold.src = goldCards[Math.floor(Math.random()*goldCards.length)] + '?v=' + Date.now();
    gold.style.width = width + 'px';
    gold.style.zIndex = i;
    gold.style.left = 50 + (i-(currentSpread-1)/2)*30 + '%';
    cardContainer.appendChild(gold);
    cardsInPlay.push(gold);
  }

  // shuffle animation
  let shuffleTimes = 20;
  const shuffleInterval = setInterval(()=>{
    cardsInPlay.forEach(c=>{
      c.src = goldCards[Math.floor(Math.random()*goldCards.length)] + '?v=' + Date.now();
      const angle = (Math.random()-0.5)*30;
      c.style.transform = `translateX(-50%) rotate(${angle}deg)`;
    });
    shuffleTimes--;
    if(shuffleTimes<=0){
      clearInterval(shuffleInterval);
      // reveal message cards fresh
      cardsInPlay.forEach((c,i)=>{
        setTimeout(()=>{
          const randomIndex = Math.floor(Math.random()*messageCards.length);
          c.src = messageCards[randomIndex] + '?v=' + Date.now();
          c.style.transform = `translateX(-50%) rotate(0deg)`;
          // sparkle
          for(let j=0;j<20;j++){
            const sparkle = document.createElement('div');
            sparkle.className='sparkle';
            sparkle.style.left = (Math.random()*width) + 'px';
            sparkle.style.top = (Math.random()*width) + 'px';
            sparkle.style.background = ['#FFD700','#FF69B4','#D8B0FF','#FFFFFF'][Math.floor(Math.random()*4)];
            sparkle.style.boxShadow = `0 0 8px 3px ${sparkle.style.background}`;
            c.parentElement.appendChild(sparkle);
            setTimeout(()=>{sparkle.remove();},800);
          }
        }, i*200);
      });
      chime.currentTime=0;
      chime.play();
    }
  }, 100);
});
</script>

</body>
</html>
